---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import SiteHeader from '../../components/SiteHeader.astro';
import SiteFooter from '../../components/SiteFooter.astro';
import ArticleCard from '../../components/ArticleCard.astro';

const articles = (await getCollection('articles', ({ data }) => !data.draft)).sort(
  (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime()
);
---

<BaseLayout title="Articles | Samuel Choong" description="Articles and strategic notes by Samuel Choong.">
  <SiteHeader />
  <main class="section">
    <div class="container">
      <span class="eyebrow">Articles</span>
      <h1 class="h2">Published Notes & Strategy Briefs</h1>
      <p class="lead">Long-form ideas around AI infrastructure, automation engineering, and expansion economics.</p>

      <div class="grid cards">
        {articles.map((article, index) => (
          <ArticleCard
            title={article.data.title}
            summary={article.data.summary}
            href={`/articles/${article.slug}/`}
            publishDate={article.data.publishDate}
            tags={article.data.tags}
            delay={80 + index * 70}
          />
        ))}
      </div>
    </div>
  </main>
  <SiteFooter />
</BaseLayout>

<style>
  .cards {
    margin-top: 1.2rem;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  @media (max-width: 720px) {
    .cards {
      grid-template-columns: 1fr;
    }
  }
</style>
